<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Velha</title>

<style>
    html, body {
        margin: 0;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #222;
        font-family: Arial, sans-serif;
    }

    .game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    canvas {
        background: white;
        touch-action: none;
        max-width: 90vw;
        max-height: 90vw;
    }

    .status {
        margin-top: 10px;
        color: white;
        font-size: 18px;
        height: 24px;
    }
</style>
</head>
<body>

<div class="game-container">
    <canvas id="game" width="400" height="400"></canvas>
    <div class="status" id="status">Seu turno. Você é a bolinha</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const statusText = document.getElementById("status");

const SIZE = 400;
const CELL = SIZE / 3;

let board = [
    [null, null, null],
    [null, null, null],
    [null, null, null]
];

let current = "o";
let winner = null;
let draw = false;

function drawBoard() {
    ctx.clearRect(0, 0, SIZE, SIZE);

    ctx.lineWidth = 6;
    ctx.strokeStyle = "#000";

    ctx.beginPath();
    ctx.moveTo(CELL, 0);
    ctx.lineTo(CELL, SIZE);
    ctx.moveTo(CELL * 2, 0);
    ctx.lineTo(CELL * 2, SIZE);
    ctx.moveTo(0, CELL);
    ctx.lineTo(SIZE, CELL);
    ctx.moveTo(0, CELL * 2);
    ctx.lineTo(SIZE, CELL * 2);
    ctx.stroke();

    for (let r = 0; r < 3; r++) {
        for (let c = 0; c < 3; c++) {
            if (board[r][c]) {
                drawSymbol(board[r][c], r, c);
            }
        }
    }
}

function drawSymbol(symbol, row, col) {
    const x = col * CELL + CELL / 2;
    const y = row * CELL + CELL / 2;

    ctx.lineWidth = 6;

    if (symbol === "x") {
        ctx.strokeStyle = "red";
        ctx.beginPath();
        ctx.moveTo(x - 40, y - 40);
        ctx.lineTo(x + 40, y + 40);
        ctx.moveTo(x + 40, y - 40);
        ctx.lineTo(x - 40, y + 40);
        ctx.stroke();
    } else {
        ctx.strokeStyle = "blue";
        ctx.beginPath();
        ctx.arc(x, y, 40, 0, Math.PI * 2);
        ctx.stroke();
    }
}

function checkWin() {
    for (let i = 0; i < 3; i++) {
        if (board[i][0] && board[i][0] === board[i][1] && board[i][1] === board[i][2]) {
            winner = board[i][0];
        }
        if (board[0][i] && board[0][i] === board[1][i] && board[1][i] === board[2][i]) {
            winner = board[0][i];
        }
    }

    if (board[0][0] && board[0][0] === board[1][1] && board[1][1] === board[2][2]) {
        winner = board[0][0];
    }
    if (board[0][2] && board[0][2] === board[1][1] && board[1][1] === board[2][0]) {
        winner = board[0][2];
    }

    if (!winner && board.flat().every(cell => cell)) {
        draw = true;
    }

    if (winner) {
        statusText.textContent = winner === "o" ? "Você venceu!" : "O computador venceu!";
        setTimeout(resetGame, 2000);
    } else if (draw) {
        statusText.textContent = "Empate!";
        setTimeout(resetGame, 2000);
    }
}

function computerMove() {
    let empty = [];
    for (let r = 0; r < 3; r++) {
        for (let c = 0; c < 3; c++) {
            if (!board[r][c]) empty.push([r, c]);
        }
    }
    if (empty.length === 0) return;

    const [r, c] = empty[Math.floor(Math.random() * empty.length)];
    board[r][c] = "x";
    current = "o";
    drawBoard();
    checkWin();
}

canvas.addEventListener("click", e => {
    if (winner || draw) return;

    const rect = canvas.getBoundingClientRect();
    const x = (e.clientX - rect.left) * (canvas.width / rect.width);
    const y = (e.clientY - rect.top) * (canvas.height / rect.height);

    const row = Math.floor(y / CELL);
    const col = Math.floor(x / CELL);

    if (!board[row][col]) {
        board[row][col] = "o";
        current = "x";
        drawBoard();
        checkWin();
        if (!winner && !draw) setTimeout(computerMove, 300);
    }
});

function resetGame() {
    board = [
        [null, null, null],
        [null, null, null],
        [null, null, null]
    ];
    winner = null;
    draw = false;
    current = "o";
    statusText.textContent = "Seu turno. Você é a bolinha";
    drawBoard();
}

drawBoard();
</script>

</body>
</html>
